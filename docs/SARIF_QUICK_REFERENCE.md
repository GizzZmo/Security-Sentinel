# SARIF Quick Reference

## View Security Findings

```
Repository → Security → Code scanning alerts
```

Filter by tool:
- `eslint` - JavaScript/TypeScript code quality
- `npm-audit` - Dependency vulnerabilities
- `semgrep` - C++ security patterns
- CodeQL - Semantic code analysis

## Workflow Triggers

### Automatic
- Push to `main` or `develop`
- Pull requests to `main` or `develop`
- Weekly schedule (security.yml only)

### Manual
```bash
# Go to Actions tab → Select workflow → Run workflow
```

## SARIF Files Location

### Generated During Workflow
- `eslint-results.sarif` - ESLint findings
- `npm-audit.sarif` - npm audit findings
- `semgrep.sarif` - Semgrep findings
- CodeQL SARIF - Auto-generated by CodeQL action

### Artifacts (30-day retention)
```
Actions → Workflow run → Artifacts
├── eslint-sarif-results
├── npm-audit-results
└── semgrep-sarif-results
```

## Adding a New SARIF Scanner

1. **Generate SARIF output**
   ```bash
   security-tool --format sarif --output results.sarif
   ```

2. **Upload to GitHub**
   ```yaml
   - name: Upload SARIF
     uses: github/codeql-action/upload-sarif@latest
     with:
       sarif_file: results.sarif
       category: tool-name
     if: always() && hashFiles('results.sarif') != ''
   ```

3. **Add permissions**
   ```yaml
   permissions:
     security-events: write
   ```

## Troubleshooting

### SARIF not appearing in Security tab
- Wait 5 minutes for processing
- Check workflow logs for upload errors
- Verify SARIF file is valid JSON
- Ensure `security-events: write` permission

### Permission denied
- Add to job:
  ```yaml
  permissions:
    security-events: write
  ```

### Invalid SARIF
```bash
npm install -g @microsoft/sarif-multitool
sarif-multitool validate results.sarif
```

## Best Practices

✅ **DO**
- Use unique category labels
- Upload as artifact for debugging
- Use `continue-on-error: true` for non-blocking
- Check file exists before upload

❌ **DON'T**
- Upload without category label
- Fail pipeline on security findings
- Upload invalid SARIF files
- Forget to set permissions

## Common SARIF Tools

| Tool | SARIF Support | Converter Needed |
|------|---------------|------------------|
| CodeQL | Native | No |
| Semgrep | Native | No |
| ESLint | Via formatter | Yes |
| npm audit | Via converter | Yes |
| gosec | Native | No |
| trivy | Native | No |
| Bandit | Via formatter | Yes |

## Resources

- [Full Integration Guide](SARIF_INTEGRATION.md)
- [Implementation Details](SARIF_IMPLEMENTATION_SUMMARY.md)
- [GitHub Documentation](https://docs.github.com/en/code-security/code-scanning/integrating-with-code-scanning/uploading-a-sarif-file-to-github)
- [SARIF Specification](https://docs.oasis-open.org/sarif/sarif/v2.1.0/sarif-v2.1.0.html)
